(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{25:function(e,t,a){e.exports=a.p+"static/media/logo.e889e45f.svg"},26:function(e,t,a){e.exports=a.p+"static/media/icon-hamburger.61ad75c8.svg"},27:function(e,t,a){e.exports=a.p+"static/media/icon-close.8cb8761c.svg"},29:function(e,t,a){e.exports=a.p+"static/media/icon-ok.75df9ada.svg"},30:function(e,t,a){e.exports=a.p+"static/media/icon-not-ok.db56ee32.svg"},32:function(e,t,a){e.exports=a(43)},37:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(24),o=a.n(c),r=a(8),l=(a(37),a(17)),s=a(1),m=a(4),u=a(3),d=a.n(u),f=Object(n.createContext)(),_=a(15),h=a(16),b=new(function(){function e(t){Object(_.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers,this._contentType=t.headers["Content-Type"]}return Object(h.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject(e)}},{key:"getUserData",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._handleResponse)}},{key:"getData",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._handleResponse)}},{key:"saveUserData",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"saveUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"saveNewItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"likeItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._handleResponse)}},{key:"unlikeItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}},{key:"deleteItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-15",headers:{authorization:"584f4afd-78a5-47f8-908c-ac61484f6bb9","Content-Type":"application/json"}}),p=a(25),g=a.n(p),v=a(26),E=a.n(v),O=a(27),j=a.n(O);var k=function(e){var t=e.userData,a=e.wasResponse,c=e.onLogout,o=Object(n.useState)(!1),l=Object(s.a)(o,2),u=l[0],f=l[1],_=d()("header__control",{header__control_mobile_hidden:!u}),h=u?{backgroundImage:"url(".concat(j.a,")")}:{backgroundImage:"url(".concat(E.a,")")};return i.a.createElement("header",{className:"header"},i.a.createElement("img",{className:"header__logo",src:g.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 '\u041c\u0435\u0441\u0442\u043e'"}),a&&i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/sign-in"},i.a.createElement(r.b,{to:"/sign-up",className:"header__link page__link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),i.a.createElement(m.b,{path:"/sign-up"},i.a.createElement(r.b,{to:"/sign-in",className:"header__link page__link"},"\u0412\u0445\u043e\u0434")),i.a.createElement(m.b,{exact:!0,path:"/"},i.a.createElement("div",{className:_},i.a.createElement("p",{className:"header__user-info"},t.email),i.a.createElement("button",{className:"header__button header__button_content_text",onClick:c},"\u0412\u044b\u0439\u0442\u0438")),i.a.createElement("button",{className:"header__button header__button_content_image",style:h,onClick:function(){return f(!u)}}))))};var y=function(e){var t=e.name,a=e.link,c=e.likes,o=e._id,r=e.owner,l=e.onCardClick,s=e.onCardLike,m=e.onCardDelete,u=Object(n.useContext)(f),d=r._id===u._id,_=c.some((function(e){return e._id===u._id})),h="card__button card__button_act_like ".concat(_&&"card__button_active"," page__button");return i.a.createElement("figure",{className:"card"},d&&i.a.createElement("button",{className:"card__button card__button_act_delete page__button",type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",onClick:function(){m({_id:o})}},i.a.createElement("svg",{width:"18",height:"20",fill:"#fff",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:"M2.458 18.142c.06.67.61 1.158 1.28 1.158H14.26c.67 0 1.22-.508 1.28-1.158L16.72 \r 5.79H1.28l1.178 12.352zM16.72 1.93h-5.14v-.65C11.58.569 11.011 0 10.3 0H7.72C7.01 0 6.44.569 \r 6.44 1.28v.65H1.28C.569 1.93 0 2.499 0 3.21c0 .711.569 1.28 1.28 1.28h15.44c.711 0 1.28-.569 \r 1.28-1.28 0-.711-.569-1.28-1.28-1.28z"}))),i.a.createElement("button",{className:"card__button card__button_act_enlarge-image",type:"button","aria-label":"\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c",onClick:function(){l({name:t,link:a})}},i.a.createElement("img",{className:"card__image",src:a,alt:"".concat(t,", \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f")})),i.a.createElement("figcaption",{className:"card__description"},i.a.createElement("h2",{className:"card__heading"},t),i.a.createElement("div",{className:"card__likes"},i.a.createElement("button",{className:h,type:"button","aria-label":"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",onClick:function(){s(_,{likes:c,_id:o})}},i.a.createElement("svg",{width:"20",height:"18",viewBox:"-1 -1 23 19",stroke:"black",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:"M19.154 9.338c2.14-2.14 2.14-5.614 0-7.733a5.486 5.486 0 00-7.755 0l-1.038 \r 1.06-1.038-1.039C7.183-.535 3.708-.535 1.589 1.605A5.43 5.43 0 000 5.482c0 1.462.572 \r 2.84 1.59 3.877l8.771 8.772 8.793-8.793z"}))),i.a.createElement("span",{className:"card__likes_quantity"},c.length))))};var C=function(e){var t=e.onEditProfile,a=e.onAddPlace,c=e.onEditAvatar,o=e.onCardClick,r=e.cards,l=e.onCardLike,s=e.onCardDelete,m=Object(n.useContext)(f),u=m.name,d=m.about,_=m.avatar;return i.a.createElement("main",{className:"main page__narrow"},i.a.createElement("section",{className:"profile"},i.a.createElement("div",{className:"profile__image",style:{backgroundImage:"url(".concat(_,")")}},i.a.createElement("button",{className:"profile__avatar-button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",type:"button",onClick:c})),i.a.createElement("div",{className:"profile__data"},i.a.createElement("h1",{className:"profile__name"},u),i.a.createElement("button",{className:"profile__edit-button page__button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",type:"button",onClick:t}),i.a.createElement("p",{className:"profile__profession"},d)),i.a.createElement("button",{className:"profile__add-button page__button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",type:"button",onClick:a})),i.a.createElement("section",{className:"gallery"},r.map((function(e){return i.a.createElement(y,Object.assign({key:e._id},e,{onCardClick:o,onCardLike:l,onCardDelete:s}))}))))},N=a(11),S=a(2);var T=function(e){var t=e.formRef,a=e.isSubmitActive,i=Object(n.useState)(a),c=Object(s.a)(i,2),o=c[0],r=c[1];return Object(n.useEffect)((function(){var e=Object(l.a)(t.current.elements).filter((function(e){return e.name})).every((function(e){return e.validity.valid}));r(e)})),{isSubmitValid:o}},w=i.a.memo((function(e){var t=e.submitTitle,a=e.loadingTitle,n=e.isActive,c=e.isClicked,o=e.themeModificator,r=e.actModificator,l=d()("form__submit-btn",Object(S.a)({},"form__submit-btn_theme_".concat(o),o),Object(S.a)({},"form__submit-btn_act_".concat(r),r),{"form__submit-btn_unblocked":n},{"form__submit-btn_blocked":!n});return i.a.createElement("button",{className:l,disabled:!n,type:"submit"},c?a:t)}));var M=function(e){var t=e.themeModificator,a=e.actModificator,c=e.children,o=e.name,r=e.title,l=e.submitTitle,m=e.submitLoadingTitle,u=e.isSubmitActive,f=e.onSubmit,_=e.isInfoTooltipOpen,h=d()("form",Object(S.a)({},"form_theme_".concat(t),t),Object(S.a)({},"form_act_".concat(a),a)),b=d()("form__heading",Object(S.a)({},"form__heading_theme_".concat(t),t),Object(S.a)({},"form__heading_act_".concat(a),a)),p=Object(n.useState)(!1),g=Object(s.a)(p,2),v=g[0],E=g[1],O=Object(n.useRef)();Object(n.useEffect)((function(){E(!1)}),[_]);var j=T({formRef:O,isSubmitActive:u}).isSubmitValid;return i.a.createElement("form",{action:"#",className:h,name:o,method:"GET",noValidate:!0,onSubmit:function(e){e.preventDefault(),E(!0),f()},ref:O},r&&i.a.createElement("h2",{className:b},r),c,i.a.createElement(w,{themeModificator:t,actModificator:a,submitTitle:l,loadingTitle:m,isActive:j,isClicked:v}))},I=i.a.memo((function(e){var t=e.name,a=e.placeholder,c=e.type,o=e.minLength,r=e.maxLength,l=e.value,m=e.onChange,u=e.inputRef,f=e.themeModificator,_=e.actModificator,h=Object(n.useState)(""),b=Object(s.a)(h,2),p=b[0],g=b[1],v=Object(n.useState)(!0),E=Object(s.a)(v,2),O=E[0],j=E[1],k=d()("form__input",Object(S.a)({},"form__input_theme_".concat(f),f),Object(S.a)({},"form__input_act_".concat(_),_),{form__input_valid:O},{form__input_invalid:!O}),y=d()("form__error",Object(S.a)({},"form__error_in_".concat(t),t));return i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{className:k,name:t,placeholder:a,type:c,minLength:o,maxLength:r,required:!0,autoComplete:"off",value:l,onChange:function(e){g(e.target.validationMessage),m(e),j(e.target.validity.valid)},ref:u}),i.a.createElement("span",{className:y},p))}));var L=function(e){var t=e.onLogin,a=e.loggedIn,c=e.isInfoTooltipOpen,o=d()("form__fieldset",Object(S.a)({},"form__fieldset_theme_".concat("dark"),"dark"),Object(S.a)({},"form__fieldset_act_".concat("identification"),"identification")),r=Object(m.g)();Object(n.useEffect)((function(){a&&r.push("/")}),[]);var l=Object(n.useState)({email:"",password:""}),u=Object(s.a)(l,2),f=u[0],_=u[1],h=function(e){var t=e.target,a=t.name,n=t.value;_(Object(N.a)(Object(N.a)({},f),{},Object(S.a)({},a,n)))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(M,{themeModificator:"dark",actModificator:"identification",children:!0,name:"login",title:"\u0412\u0445\u043e\u0434",submitTitle:"\u0412\u043e\u0439\u0442\u0438",submitLoadingTitle:"\u0412\u0445\u043e\u0434...",isSubmitActive:!1,onSubmit:function(){t(f)},isInfoTooltipOpen:c},i.a.createElement("fieldset",{className:o},i.a.createElement(I,{themeModificator:"dark",actModificator:"identification",name:"email",type:"email",placeholder:"Email",value:f.email,onChange:h}),i.a.createElement(I,{themeModificator:"dark",actModificator:"identification",name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",minLength:"6",maxLength:"50",value:f.password,onChange:h}))))};var x=function(e){var t=e.loggedIn,a=d()("footer","page__narrow",{footer_hidden:!t});return i.a.createElement("footer",{className:a},i.a.createElement("p",{className:"footer__copyright"},"\xa9\xa02020 Mesto Russia"))};var U=function(e){var t=e.children,a=(e.name,e.onClose),c=e.isImageInside,o=void 0!==c&&c,r=e.isFormInside,l=void 0!==r&&r,s=e.isTooltipInside,m=void 0!==s&&s,u=d()("popup","popup_active",{popup_with_form:l},{popup_with_image:o},{popup_with_tooltip:m}),f=d()("popup__container",{popup__container_with_image:o},{popup__container_with_form:l},{popup__container_with_tooltip:m}),_=function(e){"Escape"===e.key&&a()};return Object(n.useEffect)((function(){return document.body.addEventListener("keydown",_),function(){document.body.removeEventListener("keydown",_)}}),[]),i.a.createElement("div",{className:u,onMouseDown:function(e){e.target.closest(".popup__container")||a()}},i.a.createElement("div",{className:f},t,i.a.createElement("button",{className:"popup__close-button page__button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:a})))};var A=function(e){var t=e.place,a=e.onClose;return i.a.createElement(U,{name:"enlarge-image",isImageInside:!0,onClose:a},i.a.createElement("figure",{className:"popup__image-container"},i.a.createElement("img",{className:"popup__image",src:t.link,alt:"".concat(t.name,", \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f")}),i.a.createElement("figcaption",null,i.a.createElement("p",{className:"popup__image-caption"},"".concat(t.name,", \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f")),i.a.createElement("button",{className:"popup__close-button page__button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:a}))))};var R=function(e){var t=e.title,a=e.onClose,n=e.name,c=e.onSubmit,o=e.submitTitle,r=e.submitLoadingTitle,l=e.isSubmitActive,s=e.children,m=e.themeModificator,u=e.actModificator;return i.a.createElement(U,{name:n,onClose:a,isFormInside:!0},i.a.createElement(M,{themeModificator:m,actModificator:u,submitTitle:o,submitLoadingTitle:r,isSubmitActive:l,onSubmit:c,name:n,title:t},s))};var D=function(e){var t=e.onClose,a=e.onUpdateUser,c=d()("form__fieldset",Object(S.a)({},"form__fieldset_theme_".concat("light"),"light"),Object(S.a)({},"form__fieldset_act_".concat("activity"),"activity")),o=Object(n.useContext)(f),r=Object(n.useState)(o.name),l=Object(s.a)(r,2),m=l[0],u=l[1],_=Object(n.useState)(o.about),h=Object(s.a)(_,2),b=h[0],p=h[1];return i.a.createElement(R,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit-profile",onClose:t,onSubmit:function(){a({name:m,about:b})},submitTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",submitLoadingTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isSubmitActive:!0,themeModificator:"light",actModificator:"activity"},i.a.createElement("fieldset",{className:c},i.a.createElement(I,{name:"name",placeholder:"\u0418\u043c\u044f",type:"text",minLength:"2",maxLength:"40",value:m,onChange:function(e){u(e.target.value)},themeModificator:"light",actModificator:"activity"}),i.a.createElement(I,{name:"info",placeholder:"\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f",type:"text",minLength:"2",maxLength:"200",value:b,onChange:function(e){p(e.target.value)},themeModificator:"light",actModificator:"activity"})))};var P=function(e){var t=e.onClose,a=e.onUpdateAvatar,c=d()("form__fieldset",Object(S.a)({},"form__fieldset_theme_".concat("light"),"light"),Object(S.a)({},"form__fieldset_act_".concat("activity"),"activity")),o=Object(n.useRef)(),r=Object(n.useState)(""),l=Object(s.a)(r,2),m=l[0],u=l[1];return i.a.createElement(R,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"edit-avatar",onClose:t,onSubmit:function(){a({avatar:m})},submitTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",submitLoadingTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isSubmitActive:!1,themeModificator:"light",actModificator:"activity"},i.a.createElement("fieldset",{className:c},i.a.createElement(I,{name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",type:"url",value:m,inputRef:o,onChange:function(){u(o.current.value)},themeModificator:"light",actModificator:"activity"})))};var J=function(e){var t=e.onClose,a=e.onAddPlace,c=d()("form__fieldset",Object(S.a)({},"form__fieldset_theme_".concat("light"),"light"),Object(S.a)({},"form__fieldset_act_".concat("activity"),"activity")),o=Object(n.useState)(""),r=Object(s.a)(o,2),l=r[0],m=r[1],u=Object(n.useState)(""),f=Object(s.a)(u,2),_=f[0],h=f[1];return i.a.createElement(R,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-card",onClose:t,onSubmit:function(){a({name:l,link:_})},submitTitle:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",submitLoadingTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isSubmitActive:!1,themeModificator:"light",actModificator:"activity"},i.a.createElement("fieldset",{className:c},i.a.createElement(I,{name:"place",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text",minLength:"1",maxLength:"30",value:l,onChange:function(e){m(e.target.value)},themeModificator:"light",actModificator:"activity"}),i.a.createElement(I,{name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",type:"url",value:_,onChange:function(e){h(e.target.value)},themeModificator:"light",actModificator:"activity"})))};var F=function(e){var t=e.deletedCard,a=e.onConfirmDelete,n=e.onClose;return i.a.createElement(R,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"confirm",onClose:n,onSubmit:function(){a(t)},submitTitle:"\u0414\u0430",submitLoadingTitle:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...",isSubmitActive:!0,themeModificator:"light",actModificator:"activity"})};var H=function(e){var t=e.onRegister,a=e.loggedIn,c=e.isInfoTooltipOpen,o=d()("form__fieldset",Object(S.a)({},"form__fieldset_theme_".concat("dark"),"dark"),Object(S.a)({},"form__fieldset_act_".concat("identification"),"identification")),l=Object(m.g)();Object(n.useEffect)((function(){a&&l.push("/")}),[]);var u=Object(n.useState)({email:"",password:""}),f=Object(s.a)(u,2),_=f[0],h=f[1],b=function(e){var t=e.target,a=t.name,n=t.value;h(Object(N.a)(Object(N.a)({},_),{},Object(S.a)({},a,n)))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(M,{themeModificator:"dark",actModificator:"identification",children:!0,name:"login",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",submitTitle:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",submitLoadingTitle:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f...",isSubmitActive:!1,onSubmit:function(){t(_)},isInfoTooltipOpen:c},i.a.createElement("fieldset",{className:o},i.a.createElement(I,{themeModificator:"dark",actModificator:"identification",name:"email",type:"email",placeholder:"Email",value:_.email,onChange:b}),i.a.createElement(I,{themeModificator:"dark",actModificator:"identification",name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",minLength:"6",maxLength:"50",value:_.password,onChange:b}))),i.a.createElement("p",{className:"form__paragraph"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",i.a.createElement(r.b,{to:"/login",className:"form__link page__link"},"\u0412\u043e\u0439\u0442\u0438")))},z=a(31);var B=function(e){var t=e.component,a=Object(z.a)(e,["component"]);return i.a.createElement(m.b,null,(function(){return a.loggedIn?i.a.createElement(t,a):i.a.createElement(m.a,{to:"/sign-in"})}))},V=a(29),W=a.n(V),q=a(30),G=a.n(q);var $=function(e){var t=e.isSuccess,a=e.message,n=e.onClose,c=t?{backgroundImage:"url(".concat(W.a,")")}:{backgroundImage:"url(".concat(G.a,")")},o=a||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.";return i.a.createElement(U,{isTooltipInside:!0,onClose:n},i.a.createElement("div",{className:"popup__tooltip-icon",style:c}),i.a.createElement("p",{className:"popup__tooltip-paragraph"},t?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"".concat(o)))};var K=function(e){var t=e.className,a=e.responseError;return i.a.createElement("div",{className:t},i.a.createElement("p",{className:"response-error__status"},a.status),i.a.createElement("p",{className:"response-error__text"},a.statusText))},Q=new(function(){function e(t){Object(_.a)(this,e),this._baseUrl=t.baseUrl}return Object(h.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject(e)}},{key:"register",value:function(e){return fetch("".concat(this._baseUrl,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"login",value:function(e){return fetch("".concat(this._baseUrl,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"getContent",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(this._handleResponse)}}]),e}())({baseUrl:"https://auth.nomoreparties.co"});var X=function(){var e=Object(n.useState)(!0),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),r=Object(s.a)(o,2),u=r[0],_=r[1],h=Object(n.useState)({status:"",statusText:""}),p=Object(s.a)(h,2),g=p[0],v=p[1],E=d()("content",{content_hidden:!u}),O=d()("response-error",{"response-error_hidden":u});Object(n.useEffect)((function(){Promise.all([b.getUserData(),b.getData()]).then((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];De(a),He(n),_(!0)})).catch((function(e){v({status:e.status,statusText:e.statusText})})).finally((function(){c(!1)}))}),[]);var j=Object(m.g)(),y=Object(n.useState)(!1),N=Object(s.a)(y,2),S=N[0],T=N[1],w=Object(n.useState)({email:""}),M=Object(s.a)(w,2),I=M[0],U=M[1];Object(n.useEffect)((function(){R()}),[]);var R=function(){var e=localStorage.getItem("token");e&&Q.getContent(e).then((function(e){e.data&&(U({email:e.data.email}),T(!0))})).catch((function(e){console.error(e)}))},z=Object(n.useState)(!0),V=Object(s.a)(z,2),W=V[0],q=V[1],G=Object(n.useState)(),X=Object(s.a)(G,2),Y=X[0],Z=X[1],ee=function(){q(!1),ye(!0)},te=Object(n.useState)(!1),ae=Object(s.a)(te,2),ne=ae[0],ie=ae[1],ce=Object(n.useState)(!1),oe=Object(s.a)(ce,2),re=oe[0],le=oe[1],se=Object(n.useState)(!1),me=Object(s.a)(se,2),ue=me[0],de=me[1],fe=Object(n.useState)(!1),_e=Object(s.a)(fe,2),he=_e[0],be=_e[1],pe=Object(n.useState)(!1),ge=Object(s.a)(pe,2),ve=ge[0],Ee=ge[1],Oe=Object(n.useState)(!1),je=Object(s.a)(Oe,2),ke=je[0],ye=je[1],Ce=function(){de(!0)},Ne=function(){ie(!0)},Se=function(){le(!0)},Te=function(e){xe(e),be(!0)},we=function(){de(!1),ie(!1),le(!1),be(!1),Ee(!1)},Me=Object(n.useState)({}),Ie=Object(s.a)(Me,2),Le=Ie[0],xe=Ie[1],Ue=Object(n.useState)({name:"",about:"",avatar:""}),Ae=Object(s.a)(Ue,2),Re=Ae[0],De=Ae[1],Pe=Object(n.useState)([]),Je=Object(s.a)(Pe,2),Fe=Je[0],He=Je[1],ze=function(e,t){(e?b.unlikeItem.bind(b):b.likeItem.bind(b))(t._id,!e).then((function(e){var a=Fe.map((function(a){return a._id===t._id?e:a}));He(a)})).catch((function(e){alert(e)}))},Be=function(e){xe(e),Ee(!0)};return i.a.createElement(f.Provider,{value:Re},i.a.createElement("div",{className:"page"},i.a.createElement("div",{className:"page__container"},i.a.createElement(k,{userData:I,onLogout:function(){localStorage.removeItem("token"),U({email:""}),T(!1)},wasResponse:u}),a?i.a.createElement("div",{className:"spinner spinner_visible"}):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:E},i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/sign-in"},i.a.createElement(L,{onLogin:function(e){var t=e.email,a=e.password;Q.login({email:t,password:a}).then((function(e){e.token&&(localStorage.setItem("token",e.token),T(!0),j.push("/"))})).catch((function(e){401===e.status?Z("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0432\u0432\u0435\u0434\u0451\u043d email \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c."):400===e.status&&Z("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439."),ee()}))},isInfoTooltipOpen:ke,loggedIn:S})),i.a.createElement(m.b,{path:"/sign-up"},i.a.createElement(H,{onRegister:function(e){var t=e.email,a=e.password;Q.register({email:t,password:a}).then((function(e){e.email&&(q(!0),ye(!0),j.push("/sign-in"))})).catch((function(e){400===e.status&&Z("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439."),ee()}))},isInfoTooltipOpen:ke,loggedIn:S})),i.a.createElement(B,{exact:!0,path:"/",component:function(e){return i.a.createElement(C,Object.assign({},e,{cards:Fe,onAddPlace:Se,onEditAvatar:Ce,onEditProfile:Ne,onCardClick:Te,onCardLike:ze,onCardDelete:Be}))},loggedIn:S}),i.a.createElement(m.b,null,S?i.a.createElement(m.a,{to:"/"}):i.a.createElement(m.a,{to:"/sign-in"})))),i.a.createElement(K,{className:O,responseError:g})),i.a.createElement(x,{loggedIn:S})),ne&&i.a.createElement(D,{onClose:we,onUpdateUser:function(e){b.saveUserData(e).then((function(e){De(e)})).catch((function(e){alert(e)})).finally((function(){we()}))}}),ue&&i.a.createElement(P,{onClose:we,onUpdateAvatar:function(e){b.saveUserAvatar(e).then((function(e){De(e)})).catch((function(e){alert(e)})).finally((function(){we()}))}}),re&&i.a.createElement(J,{onClose:we,onAddPlace:function(e){b.saveNewItem(e).then((function(e){He([e].concat(Object(l.a)(Fe)))})).catch((function(e){alert(e)})).finally((function(){we()}))}}),he&&i.a.createElement(A,{place:Le,onClose:we}),ve&&i.a.createElement(F,{deletedCard:Le,onClose:we,onConfirmDelete:function(e){b.deleteItem(e._id).then((function(){var t=Fe.filter((function(t){return t._id!==e._id}));He(t)})).catch((function(e){alert(e)})).finally((function(){we()}))}}),ke&&i.a.createElement($,{isSuccess:W,message:Y,onClose:function(){ye(!1),Z("")}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(r.a,null,i.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.7564f1b1.chunk.js.map